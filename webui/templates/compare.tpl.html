<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>标靶位移检测</title>
    <link rel="stylesheet" href="/css/bulma.min.css">
</head>
<body>
    <section class="hero is-primary is-fullheight">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">标靶位移检测 - 参数设置</h1>
                <div class="columns">
                    <div class="column">
                        <figure class="image is-512x512">
                            <img id="image-preview" src="/images/blank_image.png" alt="Preview">
                        </figure>
                        <div class="buttons">
                            <button id="get-base-image" class="button is-primary">获取基准图像</button>
                            <button id="manual-compare" class="button is-primary">获取目标图像</button>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field">
                            <input type="checkbox" id="auto-compare" class="switch is-rounded is-primary">
                            <label for="auto-compare">自动检测</label>
                        </div>
                        <div class="field">
                            <label class="label">自动检测间隔 (小时)</label>
                            <div class="control">
                                <input type="text" id="compare-interval" class="input" value="24">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">偏移 (mm)</label>
                            <p class="is-size-5" id="offset">(0, 0)</p>
                        </div>
                        <div class="field">
                            <label class="label">曝光 (us)</label>
                            <div class="control">
                                <input type="text" id="exposure" class="input" value="5000">
                            </div>
                        </div>
                        <!-- Additional Parameters -->
                        <div class="field">
                            <label class="label">winSize</label>
                            <div class="control">
                                <input type="text" id="winSize" class="input" value="11">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">maxLevel</label>
                            <div class="control">
                                <input type="text" id="maxLevel" class="input" value="40">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">criteria_esp</label>
                            <div class="control">
                                <input type="text" id="criteria-esp" class="input" value="0.001">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">criteria_count</label>
                            <div class="control">
                                <input type="text" id="criteria-count" class="input" value="200">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">maxCorners</label>
                            <div class="control">
                                <input type="text" id="maxCorners" class="input" value="64">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">qualityLevel</label>
                            <div class="control">
                                <input type="text" id="qualityLevel" class="input" value="0.9">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">minDistance</label>
                            <div class="control">
                                <input type="text" id="minDistance" class="input" value="3">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">blockSize</label>
                            <div class="control">
                                <input type="text" id="blockSize" class="input" value="11">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">subpixel_criteria_esp</label>
                            <div class="control">
                                <input type="text" id="subpixel-criteria-esp" class="input" value="0.001">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">subpixel_criteria_count</label>
                            <div class="control">
                                <input type="text" id="subpixel-criteria-count" class="input" value="60">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">subpix_winSize</label>
                            <div class="control">
                                <input type="text" id="subpix-winSize" class="input" value="15">
                            </div>
                        </div>
                        <!-- Add more parameters here -->
                        <div class="buttons">
                            <button id="apply-settings" class="button is-success">更新设置</button>
                            <button id="reset-settings" class="button is-danger">重置设置</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // JavaScript logic here
        const imagePreview = document.getElementById("image-preview");
        const getBaseImageButton = document.getElementById("get-base-image");
        const manualCompareButton = document.getElementById("manual-compare");
        const autoCompareCheckbox = document.getElementById("auto-compare");
        const compareIntervalInput = document.getElementById("compare-interval");
        const offsetSpan = document.getElementById("offset");
        const exposureInput = document.getElementById("exposure");
        const winSizeInput = document.getElementById("winSize");
        const maxLevelInput = document.getElementById("maxLevel");
        const criteriaEspInput = document.getElementById("criteria-esp");
        const criteriaCountInput = document.getElementById("criteria-count");
        const maxCornersInput = document.getElementById("maxCorners");
        const qualityLevelInput = document.getElementById("qualityLevel");
        const minDistanceInput = document.getElementById("minDistance");
        const blockSizeInput = document.getElementById("blockSize");
        const subpixelCriteriaEspInput = document.getElementById("subpixel-criteria-esp");
        const subpixelCriteriaCountInput = document.getElementById("subpixel-criteria-count");
        const subpixWinSizeInput = document.getElementById("subpix-winSize");

        const applySettingsButton = document.getElementById("apply-settings");
        const resetSettingsButton = document.getElementById("reset-settings");

        // Function to simulate loading and updating the image preview
        function updateImagePreview(imageUrl) {
            // Simulate loading
            setTimeout(() => {
                imagePreview.src = imageUrl;
            }, 2000);
        }

        // Event handlers
        getBaseImageButton.addEventListener("click", () => {
            // Simulate getting the base image
            updateImagePreview("base_image.bmp");
        });

        manualCompareButton.addEventListener("click", () => {
            // Simulate manual comparison and update offset display
            // Replace with actual logic
            offsetSpan.textContent = "(X, Y)";
        });

        applySettingsButton.addEventListener("click", () => {
            // Simulate applying settings
            // Replace with actual logic
            console.log("Settings applied");
        });

        resetSettingsButton.addEventListener("click", () => {
            // Simulate resetting settings
            // Replace with actual logic
            console.log("Settings reset");
        });

        // Simulate initial image preview
        updateImagePreview("/images/blank_image.png");
    </script>
</body>
</html>
